<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnonShare - Anonymous Social Media</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f5;
        }
        
        .post {
            transition: all 0.3s ease;
        }
        
        .post:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .expires-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
    </style>
</head>
<body class="min-h-screen">
    <header class="bg-black text-white py-4 px-6 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">AnonShare</h1>
            <button id="uploadBtn" class="bg-white text-black px-4 py-2 rounded-md font-medium hover:bg-gray-100 transition">
                Upload Content
            </button>
        </div>
    </header>

    <main class="container mx-auto py-8 px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="postsGrid">
            <!-- Posts will be loaded here -->
        </div>
    </main>

    <!-- Upload Modal -->
    <div id="uploadModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-md w-full p-6 relative">
            <button id="closeModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            
            <h2 class="text-xl font-bold mb-4">Upload Anonymous Content</h2>
            
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2" for="fileInput">
                    Select Image/Video
                </label>
                <input type="file" id="fileInput" accept="image/*,video/*" class="w-full border rounded-md p-2">
            </div>
            
            <button id="submitUpload" class="w-full bg-black text-white py-2 rounded-md hover:bg-gray-800 transition">
                Post Anonymously
            </button>
            
            <p class="text-gray-500 text-sm mt-3">
                Note: All posts will be automatically deleted after 3 days.
            </p>
        </div>
    </div>

    <script>
        // Simulated database using localStorage
        const dbKey = 'anonPosts';
        
        // Initialize modal functionality
        const uploadBtn = document.getElementById('uploadBtn');
        const uploadModal = document.getElementById('uploadModal');
        const closeModal = document.getElementById('closeModal');
        const fileInput = document.getElementById('fileInput');
        const submitUpload = document.getElementById('submitUpload');
        const postsGrid = document.getElementById('postsGrid');
        
        uploadBtn.addEventListener('click', () => {
            uploadModal.classList.remove('hidden');
            uploadModal.classList.add('flex');
        });
        
        closeModal.addEventListener('click', () => {
            uploadModal.classList.add('hidden');
            uploadModal.classList.remove('flex');
        });
        
        // Load posts from localStorage
        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem(dbKey)) || [];
            postsGrid.innerHTML = '';
            
            // Filter out expired posts and update the list
            const currentTime = new Date().getTime();
            const validPosts = posts.filter(post => {
                return currentTime < post.expiresAt;
            });
            
            // Update storage with only valid posts
            if (validPosts.length !== posts.length) {
                localStorage.setItem(dbKey, JSON.stringify(validPosts));
            }
            
            // Display posts
            validPosts.forEach((post, index) => {
                const timeLeft = Math.ceil((post.expiresAt - currentTime) / (1000 * 60 * 60 * 24));
                
                const postElement = document.createElement('div');
                postElement.className = 'post bg-white rounded-lg overflow-hidden shadow-md relative';
                
                let mediaElement;
                if (post.type.includes('image')) {
                    mediaElement = `
                        <div class="w-full h-64 bg-gray-100 overflow-hidden">
                            <img src="${post.url}" alt="User uploaded anonymous image content" class="w-full h-full object-cover">
                        </div>
                    `;
                } else if (post.type.includes('video')) {
                    mediaElement = `
                        <div class="w-full h-64 bg-black flex items-center justify-center overflow-hidden">
                            <video controls class="w-full h-full">
                                <source src="${post.url}" type="${post.type}">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    `;
                }
                
                postElement.innerHTML = `
                    ${mediaElement}
                    <div class="p-4">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-500 text-sm">Anonymous</span>
                        </div>
                    </div>
                    <div class="expires-tag">Expires in ${timeLeft} day${timeLeft !== 1 ? 's' : ''}</div>
                `;
                
                postsGrid.appendChild(postElement);
            });
            
            // If no posts, show empty state
            if (validPosts.length === 0) {
                postsGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/c7983a8d-325b-4a88-9348-c860bcee436a.png" alt="Empty feed illustration showing a blank canvas with a paintbrush" class="mx-auto mb-4 rounded-lg max-w-xs">
                        <h3 class="text-xl font-semibold mb-2">No posts yet</h3>
                        <p class="text-gray-500">Be the first to share something anonymously</p>
                    </div>
                `;
            }
        }
        
        // Handle file upload (simulated - in real app, you'd upload to a server)
        submitUpload.addEventListener('click', () => {
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Please select a file');
                return;
            }
            
            // In a real app, you would upload the file to a server here
            // For this demo, we'll simulate the uploaded file URL
            const reader = new FileReader();
            reader.onload = function(e) {
                const posts = JSON.parse(localStorage.getItem(dbKey)) || [];
                
                const newPost = {
                    id: Date.now(),
                    url: e.target.result, // Simulated URL - in real app this would be from your server
                    type: file.type,
                    expiresAt: new Date().getTime() + (3 * 24 * 60 * 60 * 1000), // 3 days from now
                    createdAt: new Date().getTime()
                };
                
                posts.unshift(newPost);
                localStorage.setItem(dbKey, JSON.stringify(posts));
                
                // Reset and close modal
                fileInput.value = '';
                uploadModal.classList.add('hidden');
                uploadModal.classList.remove('flex');
                
                // Reload posts
                loadPosts();
            };
            
            reader.readAsDataURL(file); // Using data URL in this demo - in real app you'd upload to a server
        });
        
        // Initial load
        loadPosts();
        
        // Check for expired posts periodically
        setInterval(loadPosts, 3600000); // Check every hour
    </script>
</body>
</html>


